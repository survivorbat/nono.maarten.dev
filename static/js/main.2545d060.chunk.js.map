{"version":3,"sources":["components/Tile.tsx","components/RowHint.tsx","components/Row.tsx","components/Grid.tsx","logic/GameRow.ts","logic/errors/InvalidGridSize.ts","logic/GameGrid.ts","logic/GameTile.ts","logic/Generator.ts","components/ErrorField.tsx","components/NewGame.tsx","components/SuccessField.tsx","App.tsx","index.tsx"],"names":["Tile","_ref","tile","select","solved","style","react","onClick","isSelected","undefined","className","concat","RowHint","hints","vertical","map","hint","key","Row","row","columns","tileStyle","components_RowHint","isCorrect","getHints","tiles","components_Tile","Grid","grid","tileSize","rows","length","width","height","columnHints","components_Row","GameRow","Object","classCallCheck","this","createClass","value","some","reduce","result","getSolution","filter","InvalidGridSize","_Error","expected","actual","possibleConstructorReturn","getPrototypeOf","call","inherits","wrapNativeSuper","Error","GameGrid","size","rowHints","Math","pow","current","index","floor","Array","fill","column","GameTile","solution","selected","generateGrid","random","ErrorField","message","NewGame","newGame","SuccessField","App","_useState","useState","_useState2","slicedToArray","difficulty","setDifficulty","_useState3","_useState4","setGrid","_useState5","_useState6","errorMessage","setErrorMessage","_useState7","_useState8","successMessage","setSuccessMessage","Container","Col","components_Grid","e","components_ErrorField","components_SuccessField","components_NewGame","ReactDOM","render","react_default","a","createElement","StrictMode","src_App","document","getElementById"],"mappings":"oVAwBeA,MAdf,SAAaC,GAEC,IADZC,EAAID,EAAJC,KAAMC,EAAMF,EAANE,OAAQC,EAAMH,EAANG,OAAQC,EAAKJ,EAALI,MAEtB,OACEC,EAAA,oBACED,MAAOA,EACPE,QAAUL,EAAKM,cAAiBJ,OAA8BK,EAArB,kBAAMN,EAAOD,IACtDQ,UAAS,aAAAC,OAAeT,EAAKM,aAAe,GAAK,KAAI,aAAAG,OACnDP,EAAS,cAAgB,OCMlBQ,MAhBf,SAAgBX,GAA4C,IAAzCY,EAAKZ,EAALY,MAAOT,EAAMH,EAANG,OAAQU,EAAQb,EAARa,SAChC,OACER,EAAA,qBACEI,UAAS,GAAAC,OAAKG,EAAW,cAAgB,WAAU,KAAAH,OACjDP,EAAS,cAAgB,KAG1BS,EAAME,IAAI,SAACC,EAAMC,GAAG,OACnBX,EAAA,sBAAMW,IAAKA,EAAKP,UAAU,mBACvBM,OCiBIE,MArBf,SAAYjB,GAEC,IADXkB,EAAGlB,EAAHkB,IAAKC,EAAOnB,EAAPmB,QAASjB,EAAMF,EAANE,OAAQkB,EAASpB,EAAToB,UAEtB,OACEf,EAAA,wBACEA,EAAA,oBAAID,MAAOgB,GACTf,EAAA,cAACgB,EAAO,CAAClB,OAAQe,EAAII,YAAaV,MAAOM,EAAIK,cAE9CL,EAAIM,MAAMV,IAAI,SAACb,EAAMe,GAAG,OACvBX,EAAA,cAACoB,EAAI,CACHrB,MAAOgB,EACPjB,OAAQgB,EAAQH,GAAKM,aAAeJ,EAAII,YACxCrB,KAAMA,EACNC,OAAQA,EACRc,IAAKA,cCuBAU,MAtCf,SAAa1B,GAA8B,IAA3B2B,EAAI3B,EAAJ2B,KAAMzB,EAAMF,EAANE,OACd0B,EAAW,KAAOD,EAAKE,KAAKC,OAAS,GACrCV,EAAY,CAAEW,MAAK,GAAArB,OAAKkB,EAAQ,KAAKI,OAAM,GAAAtB,OAAKkB,EAAQ,MAE9D,OACEvB,EAAA,qBAAKI,UAAU,kBACbJ,EAAA,uBAAOI,UAAU,QACfJ,EAAA,2BACEA,EAAA,wBACEA,EAAA,oBAAID,MAAOgB,IACVO,EAAKM,YAAYnB,IAAI,SAACF,EAAOI,GAAG,OAC/BX,EAAA,oBAAID,MAAOgB,EAAWJ,IAAKA,GACzBX,EAAA,cAACgB,EAAO,CACNR,UAAQ,EACRV,OAAQwB,EAAKR,QAAQH,GAAKM,YAC1BV,MAAOA,OAIbP,EAAA,oBAAID,MAAOgB,MAGff,EAAA,2BACGsB,EAAKE,KAAKf,IAAI,SAACI,EAAKF,GAAG,OACtBX,EAAA,cAAC6B,EAAG,CACFd,UAAWA,EACXF,IAAKA,EACLC,QAASQ,EAAKR,QACdH,IAAKA,EACLd,OAAQA,wBCvCDiC,EAAO,WAC1B,SAAAA,EAA4BX,GAAoBY,OAAAC,EAAA,EAAAD,CAAAE,KAAAH,GAAAG,KAApBd,QAoB3B,OApBgDY,OAAAG,EAAA,EAAAH,CAAAD,EAAA,EAAAnB,IAAA,YAAAwB,MAAA,WAG/C,OAAQF,KAAKd,MAAMiB,KAAK,SAACD,GAAK,OAAMA,EAAMlB,gBAC3C,CAAAN,IAAA,WAAAwB,MAAA,WAGC,OAAOF,KAAKd,MACTkB,OACC,SAACC,EAAQ1C,GACP,OAAIA,EAAK2C,eACPD,EAAOA,EAAOb,OAAS,KAChBa,GAGFA,EAAOjC,OAAO,IAEvB,CAAC,IAEFmC,OAAO,SAAC9B,GAAI,OAAc,IAATA,QACrBoB,EArByB,mCCFPW,EAAe,SAAAC,GAClC,SAAAD,EAAYE,EAAkBC,GAAiB,OAAAb,OAAAC,EAAA,EAAAD,CAAAE,KAAAQ,GAAAV,OAAAc,EAAA,EAAAd,CAAAE,KAAAF,OAAAe,EAAA,EAAAf,CAAAU,GAAAM,KAAAd,KAAA,6BAAA5B,OACVuC,EAAM,gBAAAvC,OAAesC,KACzD,OAHiCZ,OAAAiB,EAAA,EAAAjB,CAAAU,EAAAC,GAGjCD,EAHiC,CAGjCV,OAAAkB,EAAA,EAAAlB,CAH0CmB,QCIxBC,EAAQ,WAS3B,SAAAA,EAA4BhC,EAAmCiC,GAC7D,GAD4ErB,OAAAC,EAAA,EAAAD,CAAAE,KAAAkB,GAAAlB,KAAlDd,QAAiBc,KAAkBmB,OAAYnB,KAR3DL,iBAAW,EAAAK,KAEXoB,cAAQ,EAAApB,KAERT,UAAI,EAAAS,KAEJnB,aAAO,EAGjBK,EAAMM,SAAM6B,KAAAC,IAAKH,EAAQ,GAC3B,MAAM,IAAIX,EAAea,KAAAC,IAACH,EAAQ,GAAGjC,EAAMM,QAG7CQ,KAAKT,KAAOL,EACTkB,OAAO,SAACC,EAAQkB,EAASC,GACxB,IAAM9C,EAAM2C,KAAKI,OAAOD,EAAQ,IAAOL,GAEvC,OADAd,EAAO3B,GAAO2B,EAAO3B,GAAKN,OAAOmD,GAC1BlB,GACN,IAAIqB,MAAMP,GAAMQ,KAAK,KACvBnD,IAAI,SAACU,GAAK,OAAK,IAAIW,EAAQX,KAE9Bc,KAAKoB,SAAWpB,KAAKT,KAAKf,IAAI,SAACI,GAAG,OAAKA,EAAIK,aAE3Ce,KAAKnB,QAAUK,EACZkB,OAAO,SAACC,EAAQkB,EAASC,GACxB,IAAM9C,EAAM8C,EAAQL,EAEpB,OADAd,EAAO3B,GAAO2B,EAAO3B,GAAKN,OAAOmD,GAC1BlB,GACN,IAAIqB,MAAMP,GAAMQ,KAAK,KACvBnD,IAAI,SAACU,GAAK,OAAK,IAAIW,EAAQX,KAE9Bc,KAAKL,YAAcK,KAAKnB,QAAQL,IAAI,SAACoD,GAAM,OAAKA,EAAO3C,aAKxD,OAJAa,OAAAG,EAAA,EAAAH,CAAAoB,EAAA,EAAAxC,IAAA,YAAAwB,MAAA,WAGC,OAAQF,KAAKd,MAAMiB,KAAK,SAACD,GAAK,OAAMA,EAAMlB,kBAC3CkC,EArC0B,GCJRW,EAAQ,WAG3B,SAAAA,EAA6BC,GAAoBhC,OAAAC,EAAA,EAAAD,CAAAE,KAAA6B,GAAA7B,KAApB8B,WAAiB9B,KAFtC+B,UAAoB,EA0B3B,OAxBiDjC,OAAAG,EAAA,EAAAH,CAAA+B,EAAA,EAAAnD,IAAA,YAAAwB,MAAA,WAGhD,OAAOF,KAAK+B,WAAa/B,KAAK8B,WAC/B,CAAApD,IAAA,cAAAwB,MAAA,WAGC,OAAOF,KAAK8B,WACb,CAAApD,IAAA,aAAAwB,MAAA,WAGC,OAAOF,KAAK+B,WACb,CAAArD,IAAA,SAAAwB,MAAA,WAGC,GAAIF,KAAK+B,SACP,MAAM,IAAId,MAAM,yBAGlB,IAAKjB,KAAK8B,SACR,MAAM,IAAIb,MAAM,6BAGlBjB,KAAK+B,UAAW,MACjBF,EA3B0B,GCWdG,EARM,SAACb,GACpB,IAEMd,EAFO,IAAIqB,MAAKL,KAAAC,IAACH,EAAQ,IAAGQ,KAAK,GAEnBnD,IAAI,kBAAM,IAAIqD,EAASR,KAAKY,UAAY,MAE5D,OAAO,IAAIf,EAASb,EAAQc,UCGfe,MAJf,SAAmBxE,GAA+B,IAA5ByE,EAAOzE,EAAPyE,QACpB,OAAOpE,EAAA,mBAAGI,UAAU,eAAegE,UCStBC,MAVf,SAAgB1E,GAA4B,IAAzB2E,EAAO3E,EAAP2E,QACjB,OACEtE,EAAA,qBAAKI,UAAU,sBACbJ,EAAA,wBAAQC,QAASqE,EAASlE,UAAU,mBAAiB,oBCC5CmE,MAJf,SAAqB5E,GAAiC,IAA9ByE,EAAOzE,EAAPyE,QACtB,OAAOpE,EAAA,mBAAGI,UAAU,iBAAiBgE,ICyDxBI,MArDf,WAAe,IAAAC,EACuBC,mBAAS,GAAEC,EAAA5C,OAAA6C,EAAA,EAAA7C,CAAA0C,EAAA,GAAxCI,EAAUF,EAAA,GAAEG,EAAaH,EAAA,GAAAI,EACRL,mBAAST,EAAaY,IAAYG,EAAAjD,OAAA6C,EAAA,EAAA7C,CAAAgD,EAAA,GAAnDzD,EAAI0D,EAAA,GAAEC,EAAOD,EAAA,GAAAE,EACoBR,mBAAS,IAAGS,EAAApD,OAAA6C,EAAA,EAAA7C,CAAAmD,EAAA,GAA7CE,EAAYD,EAAA,GAAEE,EAAeF,EAAA,GAAAG,EACQZ,mBAAS,IAAGa,EAAAxD,OAAA6C,EAAA,EAAA7C,CAAAuD,EAAA,GAAjDE,EAAcD,EAAA,GAAEE,EAAiBF,EAAA,GAuBxC,OACEvF,EAAA,cAAC0F,EAAA,EAAS,KACR1F,EAAA,cAACY,EAAA,EAAG,KACFZ,EAAA,cAAC2F,EAAA,EAAG,KACF3F,EAAA,cAAC4F,EAAI,CAACtE,KAAMA,EAAMzB,OAzBD,SAACD,GACxB,IACEA,EAAKC,SACLwF,EAAgB,IAChB,MAAOQ,GACPR,EAAgB,6BAChBP,EAAcD,EAAa,EAAI,EAAIA,EAAa,EAAIA,GAEtDI,EAAQ,IAAI9B,EAAS7B,EAAKH,MAAOG,EAAK8B,OAElC9B,EAAKL,cACPwE,EAAkB,oCAClBX,EAAcD,EAAa,SAgB3B7E,EAAA,cAACY,EAAA,EAAG,KACFZ,EAAA,cAAC2F,EAAA,EAAG,KACF3F,EAAA,cAAC8F,EAAU,CAAC1B,QAASgB,MAGzBpF,EAAA,cAACY,EAAA,EAAG,KACFZ,EAAA,cAAC2F,EAAA,EAAG,KACF3F,EAAA,cAAC+F,EAAY,CAAC3B,QAASoB,MAG3BxF,EAAA,cAACY,EAAA,EAAG,KACFZ,EAAA,cAAC2F,EAAA,EAAG,KACF3F,EAAA,cAACgG,EAAO,CAAC1B,QAxBD,WACdW,EAAQhB,EAAaY,IACrBY,EAAkB,iBC9BtBQ,IAASC,OACPC,EAAAC,EAAAC,cAACF,EAAAC,EAAME,WAAU,KACfH,EAAAC,EAAAC,cAACE,EAAG,OAENC,SAASC,eAAe","file":"static/js/main.2545d060.chunk.js","sourcesContent":["import * as React from 'react';\nimport GameTile from '../logic/GameTile';\n\ninterface TileProps {\n  tile: GameTile;\n  style: any;\n  solved: boolean;\n  select: (tile: GameTile) => void;\n}\n\nfunction Tile({\n  tile, select, solved, style,\n}: TileProps) {\n  return (\n    <td\n      style={style}\n      onClick={!tile.isSelected() && !solved ? () => select(tile) : undefined}\n      className={`tile tile-${tile.isSelected() ? '' : 'un'}selected ${\n        solved ? 'tile-solved' : ''\n      }`}\n    />\n  );\n}\n\nexport default Tile;\n","import * as React from 'react';\n\ninterface RowHintProps {\n  hints: number[];\n  solved: boolean;\n  vertical?: boolean;\n}\n\nfunction RowHint({ hints, solved, vertical }: RowHintProps) {\n  return (\n    <div\n      className={`${vertical ? 'column-hint' : 'row-hint'} ${\n        solved ? 'hint-solved' : ''\n      }`}\n    >\n      {hints.map((hint, key) => (\n        <span key={key} className=\"row-hint-number\">\n          {hint}\n        </span>\n      ))}\n    </div>\n  );\n}\n\nexport default RowHint;\n","import * as React from 'react';\nimport Tile from './Tile';\nimport GameRow from '../logic/GameRow';\nimport GameTile from '../logic/GameTile';\nimport RowHint from './RowHint';\n\ninterface RowProps {\n  row: GameRow;\n  tileStyle: any;\n  columns: GameRow[];\n  select: (index: GameTile) => void;\n}\n\nfunction Row({\n  row, columns, select, tileStyle,\n}: RowProps) {\n  return (\n    <tr>\n      <td style={tileStyle}>\n        <RowHint solved={row.isCorrect()} hints={row.getHints()} />\n      </td>\n      {row.tiles.map((tile, key) => (\n        <Tile\n          style={tileStyle}\n          solved={columns[key].isCorrect() || row.isCorrect()}\n          tile={tile}\n          select={select}\n          key={key}\n        />\n      ))}\n    </tr>\n  );\n}\n\nexport default Row;\n","import * as React from 'react';\nimport Row from './Row';\nimport GameGrid from '../logic/GameGrid';\nimport GameTile from '../logic/GameTile';\nimport RowHint from './RowHint';\nimport './Grid.css';\n\ninterface GridProps {\n  grid: GameGrid;\n  select: (tile: GameTile) => void;\n}\n\nfunction Grid({ grid, select }: GridProps) {\n  const tileSize = 100 / (grid.rows.length + 2);\n  const tileStyle = { width: `${tileSize}%`, height: `${tileSize}%` };\n\n  return (\n    <div className=\"grid-container\">\n      <table className=\"grid\">\n        <thead>\n          <tr>\n            <td style={tileStyle} />\n            {grid.columnHints.map((hints, key) => (\n              <td style={tileStyle} key={key}>\n                <RowHint\n                  vertical\n                  solved={grid.columns[key].isCorrect()}\n                  hints={hints}\n                />\n              </td>\n            ))}\n            <td style={tileStyle} />\n          </tr>\n        </thead>\n        <tbody>\n          {grid.rows.map((row, key) => (\n            <Row\n              tileStyle={tileStyle}\n              row={row}\n              columns={grid.columns}\n              key={key}\n              select={select}\n            />\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default Grid;\n","import GameTile from './GameTile';\n\nexport default class GameRow {\n  constructor(public readonly tiles: GameTile[]) {}\n\n  isCorrect(): boolean {\n    return !this.tiles.some((value) => !value.isCorrect());\n  }\n\n  getHints(): number[] {\n    return this.tiles\n      .reduce(\n        (result, tile) => {\n          if (tile.getSolution()) {\n            result[result.length - 1]++;\n            return result;\n          }\n\n          return result.concat(0);\n        },\n        [0],\n      )\n      .filter((hint) => hint !== 0);\n  }\n}\n","export default class InvalidGridSize extends Error {\n  constructor(expected: number, actual: number) {\n    super(`invalid tiles length, got ${actual} instead of ${expected}`);\n  }\n}\n","import GameTile from './GameTile';\nimport GameRow from './GameRow';\nimport InvalidGridSize from './errors/InvalidGridSize';\n\nexport default class GameGrid {\n  public readonly columnHints: number[][];\n\n  public readonly rowHints: number[][];\n\n  public readonly rows: GameRow[];\n\n  public readonly columns: GameRow[];\n\n  constructor(public readonly tiles: GameTile[], public readonly size: number) {\n    if (tiles.length !== size ** 2) {\n      throw new InvalidGridSize(size ** 2, tiles.length);\n    }\n\n    this.rows = tiles\n      .reduce((result, current, index) => {\n        const key = Math.floor((index + 0.1) / size);\n        result[key] = result[key].concat(current);\n        return result;\n      }, new Array(size).fill([]))\n      .map((tiles) => new GameRow(tiles));\n\n    this.rowHints = this.rows.map((row) => row.getHints());\n\n    this.columns = tiles\n      .reduce((result, current, index) => {\n        const key = index % size;\n        result[key] = result[key].concat(current);\n        return result;\n      }, new Array(size).fill([]))\n      .map((tiles) => new GameRow(tiles));\n\n    this.columnHints = this.columns.map((column) => column.getHints());\n  }\n\n  isCorrect(): boolean {\n    return !this.tiles.some((value) => !value.isCorrect());\n  }\n}\n","export default class GameTile {\n  private selected: boolean = false;\n\n  constructor(private readonly solution: boolean) {}\n\n  isCorrect(): boolean {\n    return this.selected === this.solution;\n  }\n\n  getSolution(): boolean {\n    return this.solution;\n  }\n\n  isSelected(): boolean {\n    return this.selected;\n  }\n\n  select(): void {\n    if (this.selected) {\n      throw new Error('tile already selected');\n    }\n\n    if (!this.solution) {\n      throw new Error('tile must not be selected');\n    }\n\n    this.selected = true;\n  }\n}\n","import GameGrid from './GameGrid';\nimport GameTile from './GameTile';\n\nconst generateGrid = (size: number): GameGrid => {\n  const list = new Array(size ** 2).fill(0);\n\n  const result = list.map(() => new GameTile(Math.random() <= 0.7));\n\n  return new GameGrid(result, size);\n};\n\nexport default generateGrid;\n","import * as React from 'react';\nimport './ErrorField.css';\n\ninterface ErrorFieldProps {\n  message: string;\n}\n\nfunction ErrorField({ message }: ErrorFieldProps) {\n  return <p className=\"error-field\">{message}</p>;\n}\n\nexport default ErrorField;\n","import * as React from 'react';\nimport './NewGame.css';\n\ninterface NewGameProps {\n  newGame: () => void;\n}\n\nfunction NewGame({ newGame }: NewGameProps) {\n  return (\n    <div className=\"new-game-container\">\n      <button onClick={newGame} className=\"new-game-button\">\n        New Game\n      </button>\n    </div>\n  );\n}\n\nexport default NewGame;\n","import * as React from 'react';\nimport './SuccessField.css';\n\ninterface SuccessFieldProps {\n  message: string;\n}\n\nfunction SuccessField({ message }: SuccessFieldProps) {\n  return <p className=\"success-field\">{message}</p>;\n}\n\nexport default SuccessField;\n","import * as React from 'react';\nimport './App.css';\nimport { useState } from 'react';\nimport { Col, Container, Row } from 'react-bootstrap';\nimport Grid from './components/Grid';\nimport generateGrid from './logic/Generator';\nimport GameTile from './logic/GameTile';\nimport GameGrid from './logic/GameGrid';\nimport ErrorField from './components/ErrorField';\nimport NewGame from './components/NewGame';\nimport SuccessField from './components/SuccessField';\n\nfunction App() {\n  const [difficulty, setDifficulty] = useState(2);\n  const [grid, setGrid] = useState(generateGrid(difficulty));\n  const [errorMessage, setErrorMessage] = useState('');\n  const [successMessage, setSuccessMessage] = useState('');\n\n  const handleGridSelect = (tile: GameTile) => {\n    try {\n      tile.select();\n      setErrorMessage('');\n    } catch (e) {\n      setErrorMessage('Oops, that one was wrong!');\n      setDifficulty(difficulty - 1 < 2 ? difficulty - 1 : difficulty);\n    }\n    setGrid(new GameGrid(grid.tiles, grid.size));\n\n    if (grid.isCorrect()) {\n      setSuccessMessage('Congrats, you solved the puzzle!');\n      setDifficulty(difficulty + 1);\n    }\n  };\n\n  const newGame = () => {\n    setGrid(generateGrid(difficulty));\n    setSuccessMessage('');\n  };\n\n  return (\n    <Container>\n      <Row>\n        <Col>\n          <Grid grid={grid} select={handleGridSelect} />\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <ErrorField message={errorMessage} />\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <SuccessField message={successMessage} />\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <NewGame newGame={newGame} />\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}